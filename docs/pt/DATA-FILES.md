# Конфигурация темы с использованием дата-файлов в Hexo ([#328](https://github.com/iissnan/hexo-theme-next/issues/328))

Обновление темы NexT через пулы проходит не слишком гладко. Часто происходит конфликтная ситуация при обновлении по команде `git pull`, хотя её и можно обойти, если смерджить настройки в файле конфигурации вручную.

На данный момент, пользователи хранят одни настройки в корневом `_config.yml` (Hexo), а другие настройки в конфиге темы `_config.yml` (NexT). И всё вроде бы ничего, но имеются некоторые недостатки:

1. Конфигурация разделяется на две части.
2. Пользователи могут запутаться, в каком файле какие должны быть настройки.

Во избежании проблемы, NexT использует преимущество Hexo [дата-файлов](https://hexo.io/docs/data-files.html). И т.к. дата-файлы были представлены в Hexo 3, необходимо обновиться до Hexo 3.0 (или выше) для использования этой возможности.

Если же Вы предпочитаете Hexo 2.x, то можно использовать старый способ для конфигураций. NexT всё ещё совместим с Hexo 2.x (но возможны ошибки).

## Профит

Благодаря этой возможности, можно хранить всю конфигурацию в одном файле (`source/_data/next.yml`) и отпала необходимость изменять оригинальный конфиг темы (`next/_config.yml`). Если в новых версиях появятся какие-то новые настройки, нужно просто скопировать эти настройки из оригинального `next/_config.yml` во внешний `_data/next.yml` и настроить по своему усмотрению.

## Использование

1. Убеждаемся, что Hexo версии 3 (или выше)
2. Создаём файл под именем `next.yml` в корневой директории сайта — `hexo/source/_data` (создаём директорию `_data`, если отсутствует)
3. Копируем настройки из конфига темы NexT (`_config.yml`) и из корневого конфига сайта (`_config.yml`) в файл `hexo/source/_data/next.yml`
4. Добавляем параметр `--config source/_data/next.yml` при запуске сервера, генерации или развёртывания.\ Например: `hexo clean --config source/_data/next.yml && hexo g --config source/_data/next.yml`.